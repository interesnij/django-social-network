{% load get_key %}

<div class="container mt-3">

  <span class="load_block">
  <div class="media mt-3" style="padding-left: 7px;">
    <form class="uuid_saver" data-uuid="{{ list.uuid }}">
      {% csrf_token %}
    <h5 class="mt-1">
      <span>
        <span class="second_list_name" data-name="{{ list.name }}">{{ list.name }}</span> ({{ list.count }}) - альбом
        <a class="underline ajax" href="{{ list.community.get_link }}">{{ list.community.name }}</a>
      </span>
        <input type="file" accept="image/*" class="add_photos_in_list" name="file" style="display:none" multiple="multiple">
        {% if list.is_main or list.is_have_edit %}
        <span class="pointer badge badge-light-success previous_click">Добавить фото</span>
        {% endif %}
        {% if community.pk == list.community.pk and list.is_have_edit %}
        <span class="pointer badge badge-light-secondary c_photo_list_edit">Изменить список</span>
        <span class="pointer badge badge-light-danger c_photo_list_remove">Удалить список</span>
        {% endif %}
        <span class="pointer badge badge-light-info copy_link">Копировать ссылку</span>
    </h5>
    </form>
  </div>
  <div class="container-fluid mt-3 pk_saver">
    {% if object_list %}
    <div class="row is_block_paginate drag_container is_stat_list" data-pk="{{ list.pk }}" owner-pk="{{ list.community.pk }}" data-type="community_photo_list">

      {% for object in object_list %}
        <div class="row_item pointer hide_shower detail_photo" photo-pk="{{ object.pk }}">
          <p class="handle" style="display:none; color:white !important">
            <svg height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
          </p>
          <div class="progressive replace" data-href="{{ object.file.url }}">
            <img class="preview image_fit_200" src="{{ object.get_preview }}" alt="img">
          </div>
        </div>
      {% endfor %}
      {% if page_obj.has_next %}
        <div class="load centered m-1 next_page_list" data-link="{% url 'load_photo_list' pk=list.pk %}?page={{ page_obj.next_page_number }}">
            <img src="/static/images/preloader.gif">
        </div>
      {% endif %}

    </div>
    {% else %}
      {% include 'desctop/communities/photos/main_list/no_photos.html' %}
    {% endif %}
  </div>
  </span>
</div>
