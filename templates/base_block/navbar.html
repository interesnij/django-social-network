{% load staticfiles humanize %}

<header class="main-header">
    <div class="container-fluid">
        <div class="align-items-center" style="display:flex;flex-wrap:wrap;">
          <div class="col-auto" style="padding-left: 0;">
              <a href="{% url 'main' %}" class="logo ajax" data-html="#ajax">
                <img src="{% static 'images/logo-icon.png' %}" alt="">
                <span style="margin-top:10px;float:left;"class="d-none d-sm-block">ТРЕЗВЫЙ.РУС</span>
              </a>
          </div>
          <div class="col text-right">
                <button class="btn btn-search btn-icon header-color-secondary text-hide-xs" type="button">
                  <svg fill="currentColor" class="svg_default" width="24" height="24" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                </button>

                <div class="dropdown text-hide-lg d-inline-block">
                    <a class="btn header-color-secondary btn-icon drop" id="notification">
                      <svg fill="currentColor" class="svg_default" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/></svg>
                       <span class="status-number bg-danger text-white">9+</span>
                    </a>

                    <div class="dropdown-menu notification-dropdown">
                      {% if notifications %}
                        <a href="#" class="media pink-gradient-active">
                            <figure>
                              <svg fill="currentColor" class="svg_default" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/></svg>
                            </figure>
                            <div class="media-body">
                                <h5 class="mt-0">{{ notification|safe }}</h5>
                                <p>{{ notification.timestamp|naturaltime }}</p>
                            </div>
                        </a>
                        <br>
                        <p class="mt-0" style="display: flex;align-items: center;justify-content: center;">
                          <a class="ajax" href="{% url 'unread' %}">Показать все уведомления</a>
                          <a href="{% url 'mark_all_read' %}">Отметить как прочитанные</a>
                        </p>
                        {% else %}
                          <br>
                          <p class="text-center">Нет новых уведомлений</p>
                        {% endif %}
                    </div>

                </div>
                <div class="dropdown text-hide-xs d-inline-block">
                    <a class="btn header-color-secondary username drop">
                       <figure class="userpic">
                         {% if request.user.get_avatar %}
                           <img src="{{ request.user.get_avatar.file.url }}" alt="">
                         {% else %}
                           <svg fill="currentColor" class="svg_default" style="margin-bottom:40px;" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                         {% endif %}
                       </figure>
                       <h5 class="text-hide-xs"><span class="header-color-primary">Мой профиль</span></h5>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right profile-dropdown">

                        <a class="dropdown-item ajax" href="{% url 'user' pk=request.user.pk %}">
                            <div class="row align-items-center">
                                <div class="col">Моя страница</div>
                                <div class="col-auto">
                                  <svg fill="currentColor" class="svg_default" viewBox="0 0 24 24"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-divider m-0"></div>
                        <a class="dropdown-item ajax" href="{% url 'logout' %}">
                            <div class="row align-items-center">
                                <div class="col">Выход</div>
                                <div class="col-auto">
                                    <div class="text-danger ml-2">
                                      <svg fill="currentColor" class="svg_default" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"/></svg>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
